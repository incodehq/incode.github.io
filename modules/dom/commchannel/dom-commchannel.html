<!doctype html>
<html>
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <!-- No caching headers --> 
  <meta http-equiv="cache-control" content="no-cache"> 
  <meta http-equiv="pragma" content="no-cache"> 
  <meta http-equiv="expires" content="-1"> 
  <title>Communication Channel Subdomain</title> 
  <link rel="icon" type="image/png" href="../../../images/incode-favicon.png"> 
  <!--
        Based on DataNucleus' template,
        that was in turn based on an earlier version of Apache Isis' template,
        that was in turn based on Apache Deltaspike's template.

        This template uses
        * Bootstrap v3.3.7 (https://getbootstrap.com/) for navbar.
        * Bootstrap TOC plugin v0.4.1 (https://afeld.github.io/bootstrap-toc/)
          for the table of contents.
        * jQuery (necessary for Bootstrap's JavaScript plugins)
        * Font-Awesome for some icons used by Asciidoctor

        Also:
        * Bootswatch "flatly" theme for Bootstrap (https://bootswatch.com/flatly).
        * slick.js (carousel)
        * add a link to all headers (home-grown, adapted from blog posts)
        * integration of elasticlunr.js (home-grown, adapted from blog posts)
    --> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"> 
  <link href="../../../css/bootstrap-toc/0.4.1/bootstrap-toc.min.css" rel="stylesheet"> 
  <link href="../../../css/asciidoctor/foundation.css" rel="stylesheet"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"> 
  <link href="../../../css/slick/1.5.0/slick.css" rel="stylesheet"> 
  <link href="../../../css/slick/1.5.0/slick-theme.css" rel="stylesheet"> 
  <link href="../../../css/search-panel/search-panel.css" rel="stylesheet"> 
  <link href="../../../css/header-links/header-links.css" rel="stylesheet"> 
  <link href="../../../css/sticky-header/sticky-header.css" rel="stylesheet"> 
  <link href="../../../css/customisations.css" rel="stylesheet"> 
  <!-- Coderay syntax formatter --> 
  <style type="text/css">
        /* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
    </style> 
 </head> 
 <body data-spy="scroll" data-target="#toc"> 
  <div id="basedir" style="display:none;">
   ../../../
  </div> 
  <div id="docname" style="display:none;">
   dom-commchannel
  </div> 
  <div id="filetype" style="display:none;">
   html
  </div> 
  <!-- Navbar --> 
  <nav class="navbar navbar-default navbar-static-top header"> 
   <div class="container"> 
    <div class="navbar-header"> 
     <!-- Three line menu button for use on mobile screens --> 
     <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="navbar-brand" href="../../../index.html"> <img alt="Brand" src="../../../images/incode-logo-66x52.png"> </a> 
     <a class="navbar-brand" href="../../../index.html">Incode Platform</a> 
    </div> 
    <!-- Navbar that will collapse on mobile screens --> 
    <div id="navbar" class="navbar-collapse collapse"> 
     <ul class="nav navbar-nav"> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Quickstart<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../../quickstart/quickstart.html">Quickstart App</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Optional Examples</li> 
        <li><a href="../../../quickstart/quickstart-with-embedded-camel.html">With Embedded Camel</a></li> 
        <li><a href="../../../quickstart/quickstart-with-example-usage.html">With Example Usage</a></li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../../modules/incode-parent.html">Parent POM</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Modules</li> 
        <li><a href="../../../modules/lib/lib.html">Libraries</a></li> 
        <li><a href="../../../modules/dom/dom.html">Generic Subdomains</a></li> 
        <li><a href="../../../modules/spi/spi.html">SPI Implementations</a></li> 
        <li><a href="../../../modules/wkt/wkt.html">Wicket Components</a></li> 
        <li><a href="../../../modules/mml/mml.html">MetaModel Facets</a></li> 
        <li><a href="../../../modules/ext/ext.html">Extensions</a></li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li class="dropdown-header">Source code</li> 
        <li><a href="https://github.com/incodehq/incode-platform">Github</a></li> 
        <li><a href="../../../pages/change-log/change-log.html">Change Log</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Guides</li> 
        <li><a href="../../../pages/contributors-guide/contributors-guide.html">Contributors guide</a></li> 
        <li><a href="../../../pages/committers-guide/committers-guide.html">Committers guide</a></li> 
        <li role="separator" class="divider"></li> 
        <li><a href="../../../pages/license.html">License</a></li> 
        <li><a href="../../../pages/thanks.html">Thanks</a></li> 
       </ul> </li> 
     </ul> 
     <div class="nav navbar-nav navbar-right"> 
      <!-- 'style' added to fix height of input box. FIX THIS --> 
      <form class="navbar-form" role="search" id="search-form" style="padding: 1px 15px;"> 
       <div class="form-group"> 
        <input class="form-control" id="search-field" type="text" size="30" placeholder="Search"> 
       </div> 
      </form> 
     </div> 
    </div> 
   </div> 
  </nav> 
  <div class="container"> 
   <div class="row-fluid"> 
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9"> 
     <div id="search-panel"> 
      <div id="search-results"></div> 
      <div> 
       <br> 
       <a href="#" id="search-results-clear">clear</a> 
      </div> 
     </div> 
     <span class="pdf-link"><a href="dom-commchannel.pdf"><img src="../../../images/PDF-50.png"></a></span> 
     <div class="page-title"> 
      <h1>Communication Channel Subdomain</h1> 
     </div> 
     <div id="doc-content">
      <div class="btn-group" style="float: right; font-size: small; padding: 6px;  ">
       <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/incodehq/incode-platform/edit/master/adocs/documentation/src/main/asciidoc/modules/dom/commchannel/dom-commchannel.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
       <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
       <ul class="dropdown-menu">
        <li><a href="https://github.com/incodehq/incode-platform/edit/master/adocs/documentation/src/main/asciidoc/modules/dom/commchannel/dom-commchannel.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
        <li><a href="https://github.com/incodehq/incode-platform/commits/master/adocs/documentation/src/main/asciidoc/modules/dom/commchannel/dom-commchannel.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
        <li><a href="https://github.com/incodehq/incode-platform/raw/master/adocs/documentation/src/main/asciidoc/modules/dom/commchannel/dom-commchannel.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
        <li><a href="https://github.com/incodehq/incode-platform/blame/master/adocs/documentation/src/main/asciidoc/modules/dom/commchannel/dom-commchannel.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
       </ul>
      </div> 
      <div id="preamble"> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>This module (<code>isis-module-commchannel</code>) provides the ability to attach communication channel objects (postal address, email or phone/fax number) to arbitrary domain entities. There are <em>no</em> requirements for those objects to implement any interfaces. A subclass of <code>CommunicationChannelOwnerLink</code> abstract class is required (about 50 lines of boilerplate), acting as the "glue" between the communication channel and its associated "owner" domain object.</p> 
        </div> 
        <div class="paragraph"> 
         <p>For postal address, the geocoding data can be looked up by invoking the <a href="https://developers.google.com/maps/documentation/geocoding">Google Geocoding</a> API. This allows free-form text entry of an address to be converted into its geocoded equivalent, including latitude and longitude. This in turn allows each postal address object to implement the <code>Location</code> interface (from <a href="../../wkt/gmap3/wkt-gmap3.html">Gmap3 wicket component</a>) meaning that they can be rendered in a map view.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Each communication channel object can optionally be categorized with a predefined "purpose", where the available list of "purposes" is defined by the optional <code>CommunicationChannelPurposeRepository</code> SPI service. The list of purposes can vary by both the communication channel type (postal address/email/phone) and also by the "owner" domain object; for example address objects the list could be "billing address" and "shipping address", whereas for emails the list of purposes might be "work email" or "home email".</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_domain_model">Domain Model</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The following class diagram highlights the main concepts:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <img src="images/class-diagram.png" alt="class diagram" width="1158" height="856"> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>(The colours used in the diagram are - approximately - from <a href="https://en.wikipedia.org/wiki/Object_Modeling_in_Color">Object Modeling in Color</a>).</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_screenshots">Screenshots</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module’s functionality can be explored by running the <a href="../../../quickstart/quickstart-with-example-usage.html">quickstart with example usage</a> using the <code>org.incode.domainapp.example.app.modules.ExampleDomDomCommChannelAppManifest</code>.</p> 
        </div> 
        <div class="paragraph"> 
         <p>A home page is displayed when the app is run:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/020-recreate-fixtures.png"><img src="images/020-recreate-fixtures.png" alt="020 recreate fixtures" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The fixture data sets up a number of demo objects, along with some sample <code>CommunicationChannel</code>s associated with each. These are shown in the contributed <code>communicationChannels</code> collection:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/030-communication-channels-collection-mixed-in.png"><img src="images/030-communication-channels-collection-mixed-in.png" alt="030 communication channels collection mixed in" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Also contributed are actions to create new communication channels of each of the three main types. For example, we can create a new <code>PostalAddress</code>:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/040-new-postal-address-action.png"><img src="images/040-new-postal-address-action.png" alt="040 new postal address action" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Because postal addresses can vary so much around the world, the module defines only "address lines" (rather than house street number, street address, district and so on). Apart from the first address line, these are all optional.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Completing the action updates the list of communication channels for the communication channel owner:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/050-communication-channels-added-to.png"><img src="images/050-communication-channels-added-to.png" alt="050 communication channels added to" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Each communication channel can be viewed and updated. The <code>PostalAddress</code> is the most complex:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/060-postal-address-detail.png"><img src="images/060-postal-address-detail.png" alt="060 postal address detail" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Specifically, the postal address allows geocoding data to be looked up from the <a href="https://developers.google.com/maps/documentation/geocoding">Google Geocoding</a> API:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/070-lookup-geocode.png"><img src="images/070-lookup-geocode.png" alt="070 lookup geocode" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The address lines information entered previously is used for the search, but this can be adjusted as necessary by the end-user:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/072-lookup-geocode.png"><img src="images/072-lookup-geocode.png" alt="072 lookup geocode" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The geocoding data consists of the latitude and longitude, but also of a unique place Id. It also contains various other more detailed information, such as the various components that make up the address.</p> 
        </div> 
        <div class="paragraph"> 
         <p>In addition, the raw JSON from the geocoding API request can be downloaded:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/080-download-geocode.png"><img src="images/080-download-geocode.png" alt="080 download geocode" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>specifying a filename:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/090-download-geocode-specify-filename.png"><img src="images/090-download-geocode-specify-filename.png" alt="090 download geocode specify filename" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>and viewed:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/110-geocode-file.png"><img src="images/110-geocode-file.png" alt="110 geocode file" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>All communication channel have a "purpose", which can be updated:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/120-update-postal-address-purpose.png"><img src="images/120-update-postal-address-purpose.png" alt="120 update postal address purpose" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The list of available purposes varies by channel type, for example "Billing Address" or "Shipping Address" for <code>PostalAddress</code>es, "Home Email" or "Work Email" for <code>EmailAddress</code>es, etc:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/130-purpose-defined-by-spi-service.png"><img src="images/130-purpose-defined-by-spi-service.png" alt="130 purpose defined by spi service" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The list itself is not hardcoded into the module, however; instead it is defined by the <code>CommunicationChannelPurposeRepository</code> optional SPI. If there is no implementation of this SPI service then a default "purpose" is used</p> 
        </div> 
        <div class="paragraph"> 
         <p>Every communication channel also allows adhoc notes to be added:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/140-update-notes.png"><img src="images/140-update-notes.png" alt="140 update notes" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>When creating a new <code>PostalAddress</code>, the geocode information can be looked up at the same time using the final checkbox parameter for the action:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/160-another-postal-address-lookup-geocode.png"><img src="images/160-another-postal-address-lookup-geocode.png" alt="160 another postal address lookup geocode" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The <code>PostalAddress</code> entity implements the <a href="../../wkt/gmap3/wkt-gmap3.html">gmap3 component</a>'s <code>Locatable</code> interface, meaning that it can be rendered on a map. Assuming that the extension has been configured on the classpath:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/170-lookup-as-map.png"><img src="images/170-lookup-as-map.png" alt="170 lookup as map" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Then the map is rendered:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/180-map-view.png"><img src="images/180-map-view.png" alt="180 map view" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The module also allows new <code>EmailAddress</code>es to be created:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/190-new-email-address.png"><img src="images/190-new-email-address.png" alt="190 new email address" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>And similarly allows new <code>PhoneOrFaxNumber</code>s to be created:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/200-new-phone-or-fax-number.png"><img src="images/200-new-phone-or-fax-number.png" alt="200 new phone or fax number" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>What can be created and modified can also be deleted. Each of the <code>CommunicationChannel</code> objects provide an action to remove them:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/210-remove-communication-channel.png"><img src="images/210-remove-communication-channel.png" alt="210 remove communication channel" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>As the screenshot shows, the end-user has the option of specifying some other communication channel (of the same type) as a "replacement". Because each action has a corresponding domain event, this allows for cascade updates scenarios (where other objects that depend upon the channel being deleted can instead refer to its replacement).</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/220-are-you-sure-prompt.png"><img src="images/220-are-you-sure-prompt.png" alt="220 are you sure prompt" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Alternatively, subscribers can opt to veto the removal/deletion of a communication channel. This is done using the standard technique described in the <a href="http://isis.apache.org/guides/ug.html#_ug_more-advanced_decoupling_event-bus">Apache Isis user guide</a>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_how_to_configure_use">How to configure/use</h2> 
       <div class="sectionbody"> 
        <div class="sect2"> 
         <h3 id="_classpath">Classpath</h3> 
         <div class="paragraph"> 
          <p>Update your classpath by adding this dependency in your dom project’s <code>pom.xml</code></p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.incode.module.commchannel<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>incode-module-commchannel-dom<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.15.1.1<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Check for later releases by searching <a href="http://search.maven.org/#search|ga|1|incode-module-commchannel-dom">Maven Central Repo</a>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For instructions on how to use the latest <code>-SNAPSHOT</code>, see the <a href="../../../pages/contributors-guide.html">contributors guide</a>.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_bootstrapping">Bootstrapping</h3> 
         <div class="paragraph"> 
          <p>In the <code>AppManifest</code>, update its <code>getModules()</code> method:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Class</span>&lt;?&gt;&gt; getModules() {
    <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(
            ...
            org.incode.module.commchannel.dom.CommChannelModule.class,
    );
}</code></pre> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_for_each_domain_object">For each domain object…​</h3> 
         <div class="paragraph"> 
          <p>In order to be able to add/remove communication channels for a domain object, you need to:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>implement a subclass of <code>CommunicationChannelOwnerLink</code> for the domain object’s type. <br></p> 
            <div class="paragraph"> 
             <p>This link acts as a type-safe tuple linking the domain object to the <code>CommunicationChannel</code>.</p> 
            </div> </li> 
           <li> <p>implement the <code>CommunicationChannelOwnerLinkRepository.SubtypeProvider</code> SPI interface:<br></p> 
            <div class="listingblock"> 
             <div class="content"> 
              <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">SubtypeProvider</span> {
    <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> CommunicationChannelOwnerLink&gt; subtypeFor(
        <span class="predefined-type">Class</span>&lt;?&gt; domainObject,
        CommunicationChannelType communicationChannelType);
}</code></pre> 
             </div> 
            </div> 
            <div class="paragraph"> 
             <p>This tells the module which subclass of <code>CommunicationChannelOwnerLink</code> to use to attach to the domain object. The <code>SubtypeProviderAbstract</code> adapter can be used to remove some boilerplate.</p> 
            </div> </li> 
           <li> <p>subclass <code>T_addEmailAddress</code>, <code>T_addPostalAddress</code>, <code>T_addPhoneOrFaxNumber</code> and <code>T_communicationChannels</code> (abstract) mixin classes for the domain object.<br></p> 
            <div class="paragraph"> 
             <p>These contribute the "communication channels" collection and actions to add communication channels of the various types.</p> 
            </div> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Typically the SPI implementations and the mixin classes are nested static classes of the <code>CommunicationChannelOwnerLink</code> subtype.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, in the demo app the <code>CommChannelDemoObject</code> domain object can "own" communication channels by virtue of the <code>CommunicationChannelOwnerLinkForDemoObject</code> subclass:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.PersistenceCapable(identityType= IdentityType.DATASTORE, schema=<span class="string"><span class="delimiter">"</span><span class="content">incodeCommChannelDemo</span><span class="delimiter">"</span></span>)
<span class="annotation">@javax</span>.jdo.annotations.Inheritance(strategy = InheritanceStrategy.NEW_TABLE)
<span class="annotation">@DomainObject</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CommunicationChannelOwnerLinkForDemoObject</span> <span class="directive">extends</span> CommunicationChannelOwnerLink { <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">private</span> CommChannelDemoObject demoObject;
    <span class="annotation">@Column</span>( allowsNull = <span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>, name = <span class="string"><span class="delimiter">"</span><span class="content">demoObjectId</span><span class="delimiter">"</span></span>)
    <span class="directive">public</span> CommChannelDemoObject getDemoObject() {                                              <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> demoObject;
    }
    <span class="directive">public</span> <span class="type">void</span> setDemoObject(<span class="directive">final</span> CommChannelDemoObject demoObject) {
        <span class="local-variable">this</span>.demoObject = demoObject;
    }

    <span class="directive">public</span> <span class="predefined-type">Object</span> getOwner() {                                                                  <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> getDemoObject();
    }
    <span class="directive">protected</span> <span class="type">void</span> setOwner(<span class="directive">final</span> <span class="predefined-type">Object</span> object) {
        setDemoObject((CommChannelDemoObject) object);
    }

    <span class="annotation">@DomainService</span>(nature = NatureOfService.DOMAIN)
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SubtypeProvider</span>
            <span class="directive">extends</span> CommunicationChannelOwnerLinkRepository.SubtypeProviderAbstract {           <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="directive">public</span> SubtypeProvider() {
            <span class="local-variable">super</span>(CommChannelDemoObject.class, CommunicationChannelOwnerLinkForDemoObject.class);
        }
    }

    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_communicationChannels</span>                                                  <i class="conum" data-value="5"></i><b>(5)</b>
            <span class="directive">extends</span> T_communicationChannels&lt;CommChannelDemoObject&gt; {
        <span class="directive">public</span> _communicationChannels(<span class="directive">final</span> CommChannelDemoObject owner) {
            <span class="local-variable">super</span>(owner);
        }
    }
    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_addEmailAddress</span> <span class="directive">extends</span> T_addEmailAddress&lt;CommChannelDemoObject&gt; {
        <span class="directive">public</span> _addEmailAddress(<span class="directive">final</span> CommChannelDemoObject owner) {
            <span class="local-variable">super</span>(owner);
        }
    }
    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_addPhoneOrFaxNumber</span> <span class="directive">extends</span> T_addPhoneOrFaxNumber&lt;CommChannelDemoObject&gt; {
        <span class="directive">public</span> _addPhoneOrFaxNumber(<span class="directive">final</span> CommChannelDemoObject owner) {
            <span class="local-variable">super</span>(owner);
        }
    }
    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_addPostalAddress</span> <span class="directive">extends</span> T_addPostalAddress&lt;CommChannelDemoObject&gt; {
        <span class="directive">public</span> _addPostalAddress(<span class="directive">final</span> CommChannelDemoObject owner) {
            <span class="local-variable">super</span>(owner);
        }
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>extend from <code>CommunicationChannelOwnerLink</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>the type-safe reference property to the "owning" domain object (in this case <code>DemoObject</code>). In the RDBMS this will correspond to a regular foreign key with referential integrity constraints correctly applied.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>implement the hook <code>setOwner(…​)</code> method to allow the type-safe reference property to the "owner" (in this case <code>DemoObject</code>) to be set. Also implemented <code>getOwner()</code> similarly.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>implementation of the <code>SubtypeProvider</code> SPI domain service, telling the module which subclass of <code>CommunicationChannelOwnerLink</code> to instantiate to attach to the owning domain object</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>mixins for the collections and actions contributed to the owning domain object</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_spi">SPI</h3> 
         <div class="paragraph"> 
          <p>The <code>CommunicationChannelPurposeRepository</code> interface can optionally be implemented to specify the available "purpose" for each <code>CommunicationChannel</code> domain object.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, in the demo app this is implemented as:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature = NatureOfService.DOMAIN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CommunicationChannelPurposeRepositoryForDemo</span> <span class="directive">implements</span> CommunicationChannelPurposeRepository {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">Collection</span>&lt;<span class="predefined-type">String</span>&gt; purposesFor(
            <span class="directive">final</span> CommunicationChannelType communicationChannelType,
            <span class="directive">final</span> <span class="predefined-type">Object</span> owner) {
        <span class="keyword">switch</span> (communicationChannelType) {
            <span class="keyword">case</span> EMAIL_ADDRESS:
                <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">"</span><span class="content">Home Email</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Work Email</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Other Email</span><span class="delimiter">"</span></span>);
            <span class="keyword">case</span> POSTAL_ADDRESS:
                <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">"</span><span class="content">Billing Address</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Shipping Address</span><span class="delimiter">"</span></span>);
            <span class="keyword">case</span> PHONE_NUMBER:
                <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">"</span><span class="content">Home Number</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Work Number</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Mobile Number</span><span class="delimiter">"</span></span>);
            <span class="keyword">case</span> FAX_NUMBER:
                <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">"</span><span class="content">Home Fax</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">Work Fax</span><span class="delimiter">"</span></span>);
        }
        <span class="keyword">return</span> <span class="predefined-constant">null</span>;
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>If no implementation of this interface can be found, then the module provides a single "default" purpose for all communication channels.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ui_concerns">UI Concerns</h2> 
       <div class="sectionbody"> 
        <div class="sect2"> 
         <h3 id="_suppressing_adding_ui_elements">Suppressing/adding UI elements</h3> 
         <div class="paragraph"> 
          <p>Every property, collection and action has a corresponding domain event. Thus, a subscriber can be used to hide or disable UI representation of any domain object’s members.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, the "notes" property could be suppressed using the following service:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature = NatureOfService.DOMAIN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CommChannelDemoSuppressNotesSubscriber</span> <span class="directive">extends</span> AbstractSubscriber {
    <span class="annotation">@Subscribe</span>
    <span class="directive">public</span> <span class="type">void</span> on(CommunicationChannel.NotesDomainEvent ev) {
        <span class="keyword">switch</span> (ev.getEventPhase()) {
        <span class="keyword">case</span> HIDE:
            <span class="comment">// uncomment as an example of how to influence the UI</span>
            <span class="comment">// (the 'note' property should disappear)</span>
            <span class="comment">// ev.hide();</span>
        }
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Conversely, new UI elements can be added using <a href="http://isis.apache.org/guides/ug.html#_ug_how-tos_contributed-members">contributions</a> and mixins.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_link_class">Link class</h3> 
         <div class="paragraph"> 
          <p>The <code>CommunicationChannelOwnerLink</code> object is not intended to be rendered directly in the UI. Rather, the <code>T_communicationChannels</code> mixin renders the referenced <code>CommunicationChannel</code>s instead.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Nevertheless (just in case there is a requirement to render the link object), the <code>CommunicationChannelOwnerLink</code> allows its title, icon and CSS class to be specified using subscribers to UI event classes specific to the link class.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_other_services">Other Services</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module provides the following domain services for querying notes:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><code>CommunicationChannelRepository</code><br></p> 
           <div class="paragraph"> 
            <p>To search for <code>CommunicationChannel</code>s by owner and type.</p> 
           </div> </li> 
          <li> <p><code>CommunicationChannelOwnerLinkRepository</code><br></p> 
           <div class="paragraph"> 
            <p>To search for <code>CommunicationChannelOwnerLink``s, ie the tuple that links a `CommunicationChannel</code> to an arbitrary <code>CommunicationChannelOwner</code>. This repository is likely to be less useful than <code>CommunicationChannelRepository</code>, but is crucial to the internal workings of the <code>incode-module-commchannel</code> module.</p> 
           </div> </li> 
         </ul> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_related_modules_services">Related Modules/Services</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module implements the <a href="../../wkt/gmap3/wkt-gmap3.html">gmap3 component</a>'s <code>LocationDereferencingService</code> SPI, so that clicking on a marker on a map will render the "owning" domain object, rather than the details of the <code>CommunicationChannel</code> itself.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_known_issues">Known issues</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>None known at this time.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_dependencies">Dependencies</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>Maven can report modules dependencies using:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="bash">mvn dependency:list -o -pl modules/dom/commchannel/impl -D excludeTransitive=true</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>which, excluding Incode Platform and Apache Isis modules, returns these compile/runtime dependencies:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="bash">com.google.code.gson:gson:jar:2.3.1
org.apache.commons:commons-lang3:jar:3.1</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>From the Incode Platform it uses:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><a href="../../wkt/gmap3/wkt-gmap3.html">gmap3 wicket component</a>.</p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>The module <em>also</em> uses icons from <a href="https://icons8.com/">icons8</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="hidden-xs hidden-sm hidden-md col-lg-3"> 
     <nav id="toc" data-spy="affix" data-toggle="toc"></nav> 
    </div> 
   </div> 
  </div> 
  <footer class="footer"> 
   <div class="container"> 
    <div class="row"> 
     <p class="text-center small text-muted"> Copyright © 2012~date Dan Haywood, licensed under the Apache&nbsp;License,&nbsp;v2.0. </p> 
    </div> 
   </div> 
  </footer> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
  <script src="../../../js/bootstrap/3.3.7/bootstrap.min.js"></script> 
  <script src="../../../js/bootstrap-toc/0.4.1/bootstrap-toc.min.js"></script> 
  <script src="../../../js/slick/1.5.0/slick.min.js"></script> 
  <script src="../../../js/elasticlunr/elasticlunr.min.js"></script> 
  <script src="../../../js/sticky-header/sticky-header.js"></script> 
  <script src="../../../js/search-panel/search-panel.js"></script> 
  <script src="../../../js/header-link/header-link.js"></script> 
  <script src="../../../js/toc-scroll/toc-scroll.js"></script>  
 </body>
</html>
