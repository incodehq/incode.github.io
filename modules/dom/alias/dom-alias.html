<!doctype html>
<html>
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <!-- No caching headers --> 
  <meta http-equiv="cache-control" content="no-cache"> 
  <meta http-equiv="pragma" content="no-cache"> 
  <meta http-equiv="expires" content="-1"> 
  <title>Alias Subdomain</title> 
  <link rel="icon" type="image/png" href="../../../images/incode-favicon.png"> 
  <!--
        Based on DataNucleus' template,
        that was in turn based on an earlier version of Apache Isis' template,
        that was in turn based on Apache Deltaspike's template.

        This template uses
        * Bootstrap v3.3.7 (https://getbootstrap.com/) for navbar.
        * Bootstrap TOC plugin v0.4.1 (https://afeld.github.io/bootstrap-toc/)
          for the table of contents.
        * jQuery (necessary for Bootstrap's JavaScript plugins)
        * Font-Awesome for some icons used by Asciidoctor

        Also:
        * Bootswatch "flatly" theme for Bootstrap (https://bootswatch.com/flatly).
        * slick.js (carousel)
        * add a link to all headers (home-grown, adapted from blog posts)
        * integration of elasticlunr.js (home-grown, adapted from blog posts)
    --> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"> 
  <link href="../../../css/bootstrap-toc/0.4.1/bootstrap-toc.min.css" rel="stylesheet"> 
  <link href="../../../css/asciidoctor/foundation.css" rel="stylesheet"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"> 
  <link href="../../../css/slick/1.5.0/slick.css" rel="stylesheet"> 
  <link href="../../../css/slick/1.5.0/slick-theme.css" rel="stylesheet"> 
  <link href="../../../css/search-panel/search-panel.css" rel="stylesheet"> 
  <link href="../../../css/header-links/header-links.css" rel="stylesheet"> 
  <link href="../../../css/sticky-header/sticky-header.css" rel="stylesheet"> 
  <link href="../../../css/customisations.css" rel="stylesheet"> 
  <!-- Coderay syntax formatter --> 
  <style type="text/css">
        /* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
    </style> 
 </head> 
 <body data-spy="scroll" data-target="#toc"> 
  <div id="basedir" style="display:none;">
   ../../../
  </div> 
  <div id="docname" style="display:none;">
   dom-alias
  </div> 
  <div id="filetype" style="display:none;">
   html
  </div> 
  <!-- Navbar --> 
  <nav class="navbar navbar-default navbar-static-top header"> 
   <div class="container"> 
    <div class="navbar-header"> 
     <!-- Three line menu button for use on mobile screens --> 
     <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="navbar-brand" href="../../../index.html"> <img alt="Brand" src="../../../images/incode-logo-66x52.png"> </a> 
     <a class="navbar-brand" href="../../../index.html">Incode Platform</a> 
    </div> 
    <!-- Navbar that will collapse on mobile screens --> 
    <div id="navbar" class="navbar-collapse collapse"> 
     <ul class="nav navbar-nav"> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Quickstart<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../../quickstart/quickstart.html">Quickstart App</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Optional Examples</li> 
        <li><a href="../../../quickstart/quickstart-with-embedded-camel.html">With Embedded Camel</a></li> 
        <li><a href="../../../quickstart/quickstart-with-example-usage.html">With Example Usage</a></li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../../modules/incode-parent.html">Parent POM</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Modules</li> 
        <li><a href="../../../modules/lib/lib.html">Libraries</a></li> 
        <li><a href="../../../modules/dom/dom.html">Generic Subdomains</a></li> 
        <li><a href="../../../modules/spi/spi.html">SPI Implementations</a></li> 
        <li><a href="../../../modules/wkt/wkt.html">Wicket Components</a></li> 
        <li><a href="../../../modules/mml/mml.html">MetaModel Facets</a></li> 
        <li><a href="../../../modules/ext/ext.html">Extensions</a></li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li class="dropdown-header">Source code</li> 
        <li><a href="https://github.com/incodehq/incode-platform">Github</a></li> 
        <li><a href="../../../pages/change-log/change-log.html">Change Log</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Guides</li> 
        <li><a href="../../../pages/contributors-guide/contributors-guide.html">Contributors guide</a></li> 
        <li><a href="../../../pages/committers-guide/committers-guide.html">Committers guide</a></li> 
        <li role="separator" class="divider"></li> 
        <li><a href="../../../pages/license.html">License</a></li> 
        <li><a href="../../../pages/thanks.html">Thanks</a></li> 
       </ul> </li> 
     </ul> 
     <div class="nav navbar-nav navbar-right"> 
      <!-- 'style' added to fix height of input box. FIX THIS --> 
      <form class="navbar-form" role="search" id="search-form" style="padding: 1px 15px;"> 
       <div class="form-group"> 
        <input class="form-control" id="search-field" type="text" size="30" placeholder="Search"> 
       </div> 
      </form> 
     </div> 
    </div> 
   </div> 
  </nav> 
  <div class="container"> 
   <div class="row-fluid"> 
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9"> 
     <div id="search-panel"> 
      <div id="search-results"></div> 
      <div> 
       <br> 
       <a href="#" id="search-results-clear">clear</a> 
      </div> 
     </div> 
     <span class="pdf-link"><a href="dom-alias.pdf"><img src="../../../images/PDF-50.png"></a></span> 
     <div class="page-title"> 
      <h1>Alias Subdomain</h1> 
     </div> 
     <div id="doc-content">
      <div class="btn-group" style="float: right; font-size: small; padding: 6px;  ">
       <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/modules/dom/alias/dom-alias.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
       <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
       <ul class="dropdown-menu">
        <li><a href="https://github.com/apache/isis/edit/master/adocs/documentation/src/main/asciidoc/modules/dom/alias/dom-alias.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
        <li><a href="https://github.com/apache/isis/commits/master/adocs/documentation/src/main/asciidoc/modules/dom/alias/dom-alias.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
        <li><a href="https://github.com/apache/isis/raw/master/adocs/documentation/src/main/asciidoc/modules/dom/alias/dom-alias.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
        <li><a href="https://github.com/apache/isis/blame/master/adocs/documentation/src/main/asciidoc/modules/dom/alias/dom-alias.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
       </ul>
      </div> 
      <div id="preamble"> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>This module (<code>incode-module-alias</code>) provides the ability to attach <code>Alias</code> objects to arbitrary domain entities, where "alias" means an alternative identifier for the entity. Most commonly this is the identifier within some external system (in DDD terms: in some other bounded context).</p> 
        </div> 
        <div class="paragraph"> 
         <p>The identity of the external system itself is represented in two ways: first by the "alias type" (general ledger, document management system" etc), and also by an "application tenancy path". The latter is the same concept as exists within the <a href="#../../spi/security/spi-security.adoc">Security SPI</a> module, and generally represents a multi-tenancy environment, eg to distinguish different countries. Thus, an <code>Alias</code> is the combination of the app tenancy, an alias type, and the alias reference itself (a simple string).</p> 
        </div> 
        <div class="paragraph"> 
         <p>For example, a <code>Party</code> entity might have a different identifier within a general ledger system for France say, and another identifier again in centrally-managed document management system.</p> 
        </div> 
        <div class="paragraph"> 
         <p>There are <em>no</em> requirements for domain objects with aliases implement any interfaces. Instead, <code>Alias</code> is an abstract class; the consuming application provides a subclass of <code>Alias</code> and related classes to act as the "glue" between the <code>Alias</code> and the "aliased" domain object. In total about 50 lines of boilerplate are required, details below.</p> 
        </div> 
        <div class="paragraph"> 
         <p>This module places no constraints on either the alias type nor on the format of the application tenancy path. The alias type is represented by the <code>AliasType</code>; to use the module the application must implement the mandatory <code>AliasTypeRepository</code> SPI service which identifies the available <code>AliasType</code>s. Similarly, the available application tenancy paths are provided to the module by the mandatory <code>ApplicationTenancyRepository</code> SPI service. In both cases the list of alias types and application tenancy paths is per aliased domain object; not every aliased object will have an alias in every external system.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_domain_model">Domain Model</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The following class diagram highlights the main concepts:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <img src="images/class-diagram.png" alt="class diagram" width="827" height="543"> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>(The colours used in the diagram are - approximately - from <a href="https://en.wikipedia.org/wiki/Object_Modeling_in_Color">Object Modeling in Color</a>).</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_screenshots">Screenshots</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module’s functionality can be explored by running the <a href="../../../quickstart/quickstart-with-example-usage.html">quickstart with example usage</a> using the <code>org.incode.domainapp.example.app.modules.ExampleDomDomAliasAppManifest</code>.</p> 
        </div> 
        <div class="paragraph"> 
         <p>A home page is displayed when the app is run this way:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/010-run-fixture-script.png"><img src="images/010-run-fixture-script.png" alt="010 run fixture script" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>These "aliasable" demo objects have a (contributed) <code>aliases</code> collection, and we can also add new aliases using a (contributed) <code>addAlias(…​)</code> action:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/040-add-alias.png"><img src="images/040-add-alias.png" alt="040 add alias" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The action requires the application tenancy of the alias (as returned from the <code>ApplicationTenancyRepository</code> SPI service) to be specified:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/050-enter-alias-details.png"><img src="images/050-enter-alias-details.png" alt="050 enter alias details" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>and also the alias type (as returned from the <code>AliasTypeRepository</code> SPI service) to be specified:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/052-enter-alias-details.png"><img src="images/052-enter-alias-details.png" alt="052 enter alias details" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>and finally the external alias reference itself must be specified also:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/054-enter-alias-details.png"><img src="images/054-enter-alias-details.png" alt="054 enter alias details" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>The aliases for the <code>Alias</code> domain object is added to:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/060-alias_added_to_collection.png"><img src="images/060-alias_added_to_collection.png" alt="060 alias added to collection" width="600px"></a> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>Each <code>Alias</code> can also be viewed:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/070-view-alias.png"><img src="images/070-view-alias.png" alt="070 view alias" width="600px"></a> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_how_to_configure_use">How to configure/use</h2> 
       <div class="sectionbody"> 
        <div class="sect2"> 
         <h3 id="_classpath">Classpath</h3> 
         <div class="paragraph"> 
          <p>Update your classpath by adding this dependency in your dom project’s <code>pom.xml</code>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.incode.module.alias<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>incode-module-alias-dom<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.15.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Check for later releases by searching <a href="http://search.maven.org/#search|ga|1|incode-module-alias-dom">Maven Central Repo</a>.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For instructions on how to use the latest <code>-SNAPSHOT</code>, see the <a href="../../../pages/contributors-guide.html">contributors guide</a>.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_bootstrapping">Bootstrapping</h3> 
         <div class="paragraph"> 
          <p>In the <code>AppManifest</code>, update its <code>getModules()</code> method, eg:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Class</span>&lt;?&gt;&gt; getModules() {
    <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(
            ...
            org.incode.module.alias.dom.AliasModule.class,
    );
}</code></pre> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_for_each_domain_object">For each domain object…​</h3> 
         <div class="paragraph"> 
          <p>In order to be able to add/remove aliases to a domain object, you need to:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>implement a subclass of <code>Alias</code> for the domain object’s type. <br></p> 
            <div class="paragraph"> 
             <p>This is the object that will be polymorphically attached to the "aliased" domain object; the subtype provides the type-safe association (a foreign key within the RDBMS).</p> 
            </div> </li> 
           <li> <p>implement the <code>SubtypeProvider</code> SPI interface:<br></p> 
            <div class="listingblock"> 
             <div class="content"> 
              <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">SubtypeProvider</span> {
    <span class="predefined-type">Class</span>&lt;? <span class="directive">extends</span> Alias&gt; subtypeFor(<span class="predefined-type">Class</span>&lt;?&gt; domainObject);
}</code></pre> 
             </div> 
            </div> 
            <div class="paragraph"> 
             <p>This tells the module which subclass of <code>Alias</code> to use to attach to the "aliased" domain object. The <code>SubtypeProviderAbstract</code> adapter can be used to remove some boilerplate.</p> 
            </div> </li> 
           <li> <p>subclass <code>T_addAlias</code>, <code>T_removeAlias</code> and <code>T_aliases</code> (abstract) mixin classes for the domain object.<br></p> 
            <div class="paragraph"> 
             <p>These contribute the "aliases" collection and actions to add and remove <code>Alias</code>es.</p> 
            </div> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Typically the SPI implementations and the mixin classes are nested static classes of the <code>Alias</code> subtype.</p> 
         </div> 
         <div class="paragraph"> 
          <p>For example, in the demo app the <code>DemoObject</code> domain object can have aliases by virtue of the <code>AliasForDemoObject</code> subclass:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@javax</span>.jdo.annotations.PersistenceCapable(identityType= IdentityType.DATASTORE, schema=<span class="string"><span class="delimiter">"</span><span class="content">incodeAliasDemo</span><span class="delimiter">"</span></span>)
<span class="annotation">@javax</span>.jdo.annotations.Inheritance(strategy = InheritanceStrategy.NEW_TABLE)
<span class="annotation">@DomainObject</span>(objectType = <span class="string"><span class="delimiter">"</span><span class="content">incodeAliasDemo.AliasForDemoObject</span><span class="delimiter">"</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AliasForDemoObject</span> <span class="directive">extends</span> Alias {                                             <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="directive">private</span> DemoObject demoObject;
    <span class="annotation">@Column</span>(allowsNull = <span class="string"><span class="delimiter">"</span><span class="content">false</span><span class="delimiter">"</span></span>, name = <span class="string"><span class="delimiter">"</span><span class="content">demoObjectId</span><span class="delimiter">"</span></span>)
    <span class="annotation">@Property</span>(editing = Editing.DISABLED)
    <span class="directive">public</span> AliasDemoObject getDemoObject() {                                                <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> demoObject;
    }
    <span class="directive">public</span> <span class="type">void</span> setDemoObject(<span class="directive">final</span> AliasDemoObject demoObject) {
        <span class="local-variable">this</span>.demoObject = demoObject;
    }

    <span class="directive">public</span> <span class="predefined-type">Object</span> getAliased() {                                                            <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> getDemoObject();
    }
    <span class="directive">protected</span> <span class="type">void</span> setAliased(<span class="directive">final</span> <span class="predefined-type">Object</span> aliased) {
        setDemoObject((AliasDemoObject) aliased);
    }

    <span class="annotation">@DomainService</span>(nature = NatureOfService.DOMAIN)
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">SubtypeProvider</span> <span class="directive">extends</span> AliasRepository.SubtypeProviderAbstract {   <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="directive">public</span> LinkProvider() {
            <span class="local-variable">super</span>(DemoObject.class, AliasForDemoObject.class);
        }
    }

    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_aliases</span> <span class="directive">extends</span> T_aliases&lt;DemoObject&gt; {                            <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="directive">public</span> _aliases(<span class="directive">final</span> AliasDemoObject aliased) {
            <span class="local-variable">super</span>(aliased);
        }
    }
    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_addAlias</span> <span class="directive">extends</span> T_addAlias&lt;DemoObject&gt; {
        <span class="directive">public</span> _addAlias(<span class="directive">final</span> AliasObject aliased) {
            <span class="local-variable">super</span>(aliased);
        }
    }
    <span class="annotation">@Mixin</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">_removeAlias</span> <span class="directive">extends</span> T_removeAlias&lt;DemoObject&gt; {
        <span class="directive">public</span> _removeAlias(<span class="directive">final</span> DemoObject aliased) {
            <span class="local-variable">super</span>(aliased);
        }
    }
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>extend from <code>Alias</code></td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>the type-safe reference property to the "aliased" domain object (in this case <code>DemoObject</code>). In the RDBMS this will correspond to a regular foreign key with referential integrity constraints correctly applied.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>implement the hook <code>setAliased(…​)</code> method to allow the type-safe reference property to the "aliased" (in this case <code>DemoObject</code>) to be set. Also implemented <code>getAliased()</code> similarly</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="4"></i><b>4</b></td> 
             <td>implementation of the <code>SubtypeProvider</code> SPI domain service, telling the module which subclass of <code>Alias</code> to instantiate to attach to the "aliased" domain object</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="5"></i><b>5</b></td> 
             <td>mixins for the collections and actions contributed to the "aliased" domain object</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_spi_services">SPI services</h3> 
         <div class="paragraph"> 
          <p>There are two further mandatory SPI domain services that must be implemented:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>First, the <code>ApplicationTenancyRepository</code> returns the application tenancy (path)s that are available to locate alias types for a given aliased:<br></p> 
            <div class="listingblock"> 
             <div class="content"> 
              <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">ApplicationTenancyRepository</span> {
    <span class="predefined-type">Collection</span>&lt;<span class="predefined-type">String</span>&gt; atPathsFor(<span class="directive">final</span> <span class="predefined-type">Object</span> domainObjectToAlias);
}</code></pre> 
             </div> 
            </div> 
            <div class="paragraph"> 
             <p>Note that this isn’t (necessarily) the same as the application tenancy path of the object being aliased; rather it is the list of the paths available (eg: countries/regions) for which there is an alias type (eg an external system) that may contain an alias (external system identifier).</p> 
            </div> </li> 
           <li> <p>Second, the <code>AliasTypeRepository</code> interface returns the available alias types for a given application tenancy path and aliased:<br></p> 
            <div class="listingblock"> 
             <div class="content"> 
              <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">AliasTypeRepository</span> {
    <span class="predefined-type">Collection</span>&lt;AliasType&gt; aliasTypesFor(<span class="directive">final</span> <span class="predefined-type">Object</span> aliased, <span class="directive">final</span> <span class="predefined-type">String</span> atPath);
}</code></pre> 
             </div> 
            </div> 
            <div class="paragraph"> 
             <p>where <code>AliasType</code> is defined as the interface:<br></p> 
            </div> 
            <div class="listingblock"> 
             <div class="content"> 
              <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">AliasType</span> {
    <span class="predefined-type">String</span> getId();
}</code></pre> 
             </div> 
            </div> 
            <div class="paragraph"> 
             <p>Typically <code>AliasType</code> will be implemented as an entity or perhaps a view model. The "id" is used as a column in the database tables, but in the UI the end-user sees the title of the object that implements the interface.</p> 
            </div> 
            <div class="admonitionblock warning"> 
             <table> 
              <tbody>
               <tr> 
                <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> 
                <td class="content"> 
                 <div class="paragraph"> 
                  <p>The Apache Isis framework curently (as of v1.14.0) does not support enums implementing interfaces; the example app shows how a view model can be used as a work-around.</p> 
                 </div> </td> 
               </tr> 
              </tbody>
             </table> 
            </div> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Note that there can be multiple implementations of either of these interfaces. This is to support the use case that different unrelated entities in the application may have aliases; each such aliased object can have its own supporting implementations of these SPI interfaces.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_ui_concerns">UI Concerns</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The attached <code>Alias</code> objects are shown in two contexts: as a table of <code>Alias</code> objects for the "aliased" domain object, and then as the actual subtype when the alias object itself is shown (eg <code>AliasForDemoObject</code> in the demo app).</p> 
        </div> 
        <div class="paragraph"> 
         <p>In the former case (as a table) the <code>Alias</code> will be rendered according to the <code>Alias.layout.xml</code> provided by the module. In the latter (as an object) the alias will be rendered according to the layout provided by the consuming app, offering full control of the layout. The layout provided in the demo app (ie <code>AliasForDemoObject.layout.xml</code>) is a good starting point.</p> 
        </div> 
        <div class="admonitionblock tip"> 
         <table> 
          <tbody>
           <tr> 
            <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The example <code>AliasForDemoObject.layout.xml</code> uses a little bit of custom CSS to adjust the right-hand column down a number of pixels. This resides in <code>application.css</code>:</p> 
             </div> 
             <div class="listingblock"> 
              <div class="content"> 
               <pre class="CodeRay highlight"><code data-lang="css"><span class="class">.entityPage</span><span class="class">.org-incode-module-alias-fixture-dom-alias-AliasForDemoObject</span> <span class="class">.alias-col</span> {
    <span class="key">padding-top</span>: <span class="float">41px</span>;
}</code></pre> 
              </div> 
             </div> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="paragraph"> 
         <p>The module also allows the title, icon and CSS for <code>Alias</code> objects to be customised. By default the values for these are obtained using default subscribers, namely - <code>Alias.TitleSubscriber</code>, <code>Alias.IconSubscriber</code> and <code>Alias.CssClassSubscriber</code>. The consuming module can override these values simply by providing alternative implementations.</p> 
        </div> 
        <div class="paragraph"> 
         <p>For example, the demo app has this demo implementation:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(nature = NatureOfService.DOMAIN )
<span class="directive">public</span> <span class="type">class</span> <span class="class">DemoUiSubscriber</span> <span class="directive">extends</span> AbstractSubscriber {

    <span class="annotation">@Subscribe</span>
    <span class="directive">public</span> <span class="type">void</span> on(Alias.TitleUiEvent ev) {
        Alias alias = ev.getSource();
        <span class="keyword">if</span>(isType(alias, AliasTypeDemoEnum.DOCUMENT_MANAGEMENT)) {
            ev.setTitle(<span class="string"><span class="delimiter">"</span><span class="content">DocMgmt [</span><span class="delimiter">"</span></span> + alias.getAliasTypeId() + <span class="string"><span class="delimiter">"</span><span class="content">] </span><span class="delimiter">"</span></span> + alias.getReference());
        }
    }

    <span class="annotation">@Subscribe</span>
    <span class="directive">public</span> <span class="type">void</span> on(Alias.IconUiEvent ev) {
        Alias alias = ev.getSource();
        <span class="keyword">if</span>(isType(alias, AliasTypeDemoEnum.DOCUMENT_MANAGEMENT)) {
            ev.setIconName(<span class="string"><span class="delimiter">"</span><span class="content">Alias-docMgmt</span><span class="delimiter">"</span></span>);
        } <span class="keyword">else</span> <span class="keyword">if</span> (isType(alias, AliasTypeDemoEnum.GENERAL_LEDGER)) {
            ev.setIconName(<span class="string"><span class="delimiter">"</span><span class="content">Alias-GL</span><span class="delimiter">"</span></span>);
        }
    }

    <span class="annotation">@Subscribe</span>
    <span class="directive">public</span> <span class="type">void</span> on(Alias.CssClassUiEvent ev) {
        Alias alias = ev.getSource();
        ev.setCssClass(<span class="string"><span class="delimiter">"</span><span class="content">Alias</span><span class="delimiter">"</span></span> + alias.getAtPath().replace(<span class="string"><span class="delimiter">"</span><span class="content">/</span><span class="delimiter">"</span></span>, <span class="string"><span class="delimiter">"</span><span class="content">-</span><span class="delimiter">"</span></span>));
    }

    <span class="directive">private</span> <span class="directive">static</span> <span class="type">boolean</span> isType(<span class="directive">final</span> Alias alias, <span class="directive">final</span> AliasTypeDemoEnum aliasType) {
        <span class="keyword">return</span> alias.getAliasTypeId().equals(aliasType.getId());
    }
}</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>which returns a different title, icon and alias.</p> 
        </div> 
        <div class="paragraph"> 
         <p>The custom png icons are picked up from <code>org.incode.module.alias.dom.impl</code> package (in this case, <code>Alias-docMgmt.png</code> and <code>Alias-GL.png</code>. The custom CSS is supplied in the <code>application.css</code> of the demo app:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="css"><span class="tag">tr</span><span class="class">.Alias-nl</span> {
    <span class="key">color</span>: <span class="value">blueviolet</span>;
}
<span class="tag">tr</span><span class="class">.Alias-uk</span> {
    <span class="key">color</span>: <span class="value">chocolate</span>;
}</code></pre> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_other_services">Other Services</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module provides one further domain service, namely <code>AliasRepository</code>. This can be used for finding the aliases attached to an "aliased" object.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_known_issues">Known issues</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>(As noted above), as of v1.14.0 the Apache Isis framework does not support enums implementing interfaces; the example app shows how a view model can be used as a work-around.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_dependencies">Dependencies</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>Maven can report modules dependencies using:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="bash">mvn dependency:list -o -pl modules/dom/alias/impl -D excludeTransitive=true</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>which, excluding the Apache Isis modules, returns no direct compile/runtime dependencies.</p> 
        </div> 
        <div class="paragraph"> 
         <p>The module <em>does</em> use icons from <a href="https://icons8.com/">icons8</a>.</p> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="hidden-xs hidden-sm hidden-md col-lg-3"> 
     <nav id="toc" data-spy="affix" data-toggle="toc"></nav> 
    </div> 
   </div> 
  </div> 
  <footer class="footer"> 
   <div class="container"> 
    <div class="row"> 
     <p class="text-center small text-muted"> Copyright © 2012~date Dan Haywood, licensed under the Apache&nbsp;License,&nbsp;v2.0. </p> 
    </div> 
   </div> 
  </footer> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
  <script src="../../../js/bootstrap/3.3.7/bootstrap.min.js"></script> 
  <script src="../../../js/bootstrap-toc/0.4.1/bootstrap-toc.min.js"></script> 
  <script src="../../../js/slick/1.5.0/slick.min.js"></script> 
  <script src="../../../js/elasticlunr/elasticlunr.min.js"></script> 
  <script src="../../../js/sticky-header/sticky-header.js"></script> 
  <script src="../../../js/search-panel/search-panel.js"></script> 
  <script src="../../../js/header-link/header-link.js"></script> 
  <script src="../../../js/toc-scroll/toc-scroll.js"></script>  
 </body>
</html>
