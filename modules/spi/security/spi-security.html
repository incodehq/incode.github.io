<!doctype html>
<html>
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta charset="utf-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <!-- No caching headers --> 
  <meta http-equiv="cache-control" content="no-cache"> 
  <meta http-equiv="pragma" content="no-cache"> 
  <meta http-equiv="expires" content="-1"> 
  <title>Security SPI Implementation</title> 
  <link rel="icon" type="image/png" href="../../../images/incode-favicon.png"> 
  <!--
        Based on DataNucleus' template,
        that was in turn based on an earlier version of Apache Isis' template,
        that was in turn based on Apache Deltaspike's template.

        This template uses
        * Bootstrap v3.3.7 (https://getbootstrap.com/) for navbar.
        * Bootstrap TOC plugin v0.4.1 (https://afeld.github.io/bootstrap-toc/)
          for the table of contents.
        * jQuery (necessary for Bootstrap's JavaScript plugins)
        * Font-Awesome for some icons used by Asciidoctor

        Also:
        * Bootswatch "flatly" theme for Bootstrap (https://bootswatch.com/flatly).
        * slick.js (carousel)
        * add a link to all headers (home-grown, adapted from blog posts)
        * integration of elasticlunr.js (home-grown, adapted from blog posts)
    --> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet"> 
  <link href="../../../css/bootstrap-toc/0.4.1/bootstrap-toc.min.css" rel="stylesheet"> 
  <link href="../../../css/asciidoctor/foundation.css" rel="stylesheet"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"> 
  <link href="../../../css/slick/1.5.0/slick.css" rel="stylesheet"> 
  <link href="../../../css/slick/1.5.0/slick-theme.css" rel="stylesheet"> 
  <link href="../../../css/search-panel/search-panel.css" rel="stylesheet"> 
  <link href="../../../css/header-links/header-links.css" rel="stylesheet"> 
  <link href="../../../css/sticky-header/sticky-header.css" rel="stylesheet"> 
  <link href="../../../css/customisations.css" rel="stylesheet"> 
  <!-- Coderay syntax formatter --> 
  <style type="text/css">
        /* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
    </style> 
 </head> 
 <body data-spy="scroll" data-target="#toc"> 
  <div id="basedir" style="display:none;">
   ../../../
  </div> 
  <div id="docname" style="display:none;">
   spi-security
  </div> 
  <div id="filetype" style="display:none;">
   html
  </div> 
  <!-- Navbar --> 
  <nav class="navbar navbar-default navbar-static-top header"> 
   <div class="container"> 
    <div class="navbar-header"> 
     <!-- Three line menu button for use on mobile screens --> 
     <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="navbar-brand" href="../../../index.html"> <img alt="Brand" src="../../../images/incode-logo-66x52.png"> </a> 
     <a class="navbar-brand" href="../../../index.html">Incode Platform</a> 
    </div> 
    <!-- Navbar that will collapse on mobile screens --> 
    <div id="navbar" class="navbar-collapse collapse"> 
     <ul class="nav navbar-nav"> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Quickstart<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../../quickstart/quickstart.html">Quickstart App</a></li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="../../../modules/incode-parent.html">Parent POM</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Modules</li> 
        <li><a href="../../../modules/dom/dom.html">(Sub)domains</a></li> 
        <li><a href="../../../modules/ext/ext.html">Extensions</a></li> 
        <li><a href="../../../modules/lib/lib.html">Libraries</a></li> 
        <li><a href="../../../modules/mml/mml.html">MetaModel Facets</a></li> 
        <li><a href="../../../modules/spi/spi.html">SPI Implementations</a></li> 
        <li><a href="../../../modules/wkt/wkt.html">Wicket Components</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Examples</li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Other Resources<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li class="dropdown-header">Build &amp; Maven-mixins</li> 
        <li><a href="https://github.com/incodehq/incode-build">Incode Build</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Examples (to fork)</li> 
        <li><a href="https://github.com/incodehq/incode-camel">Incode Camel</a></li> 
        <li><a href="https://github.com/incodehq/incode-examples">Incode (Sub)domain Examples</a></li> 
       </ul> </li> 
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Support<span class="caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li class="dropdown-header">Source code</li> 
        <li class="dropdown-header">Source code</li> 
        <li><a href="https://github.com/incodehq/incode-platform">Github</a></li> 
        <li><a href="https://github.com/incodehq/incode-platform/issues">Issue Tracker</a></li> 
        <li><a href="../../../pages/change-log/change-log.html">Change Log</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">CI &amp; Binaries</li> 
        <li><a href="https://gitlab.com/incodehq-public/incode-platform">Gitlab Mirror (CI)</a></li> 
        <li><a href="https://repo.incode.cloud">repo.incode.cloud (Nexus Repo)</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Guides</li> 
        <li><a href="../../../pages/contributors-guide/contributors-guide.html">Contributors guide</a></li> 
        <li><a href="../../../pages/committers-guide/committers-guide.html">Committers guide</a></li> 
        <li role="separator" class="divider"></li> 
        <li class="dropdown-header">Other</li> 
        <li><a href="../../../pages/license.html">License</a></li> 
        <li><a href="../../../pages/thanks.html">Thanks</a></li> 
       </ul> </li> 
     </ul> 
     <div class="nav navbar-nav navbar-right"> 
      <!-- 'style' added to fix height of input box. FIX THIS --> 
      <form class="navbar-form" role="search" id="search-form" style="padding: 1px 15px;"> 
       <div class="form-group"> 
        <input class="form-control" id="search-field" type="text" size="30" placeholder="Search"> 
       </div> 
      </form> 
     </div> 
    </div> 
   </div> 
  </nav> 
  <div class="container"> 
   <div class="row-fluid"> 
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9"> 
     <div id="search-panel"> 
      <div id="search-results"></div> 
      <div> 
       <br> 
       <a href="#" id="search-results-clear">clear</a> 
      </div> 
     </div> 
     <span class="pdf-link"><a href="spi-security.pdf"><img src="../../../images/PDF-50.png"></a></span> 
     <div class="page-title"> 
      <h1>Security SPI Implementation</h1> 
     </div> 
     <div id="doc-content">
      <div class="btn-group" style="float: right; font-size: small; padding: 6px;  ">
       <button type="button" class="btn btn-xs btn-default" onclick="window.location.href=&quot;https://github.com/incodehq/incode-platform/edit/master/adocs/documentation/src/main/asciidoc/modules/spi/security/spi-security.adoc&quot;"><i class="fa fa-pencil-square-o"></i>&nbsp;Edit</button>
       <button type="button" class="btn btn-xs btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span><span class="sr-only">Toggle Dropdown</span></button>
       <ul class="dropdown-menu">
        <li><a href="https://github.com/incodehq/incode-platform/edit/master/adocs/documentation/src/main/asciidoc/modules/spi/security/spi-security.adoc" target="_blank"><i class="fa fa-pencil-square-o fa-fw" aria-hidden="true"></i>&nbsp; Edit</a></li>
        <li><a href="https://github.com/incodehq/incode-platform/commits/master/adocs/documentation/src/main/asciidoc/modules/spi/security/spi-security.adoc" target="_blank"><i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>&nbsp; History</a></li>
        <li><a href="https://github.com/incodehq/incode-platform/raw/master/adocs/documentation/src/main/asciidoc/modules/spi/security/spi-security.adoc" target="_blank"><i class="fa fa-file-text-o fa-fw" aria-hidden="true"></i>&nbsp; Raw</a></li>
        <li><a href="https://github.com/incodehq/incode-platform/blame/master/adocs/documentation/src/main/asciidoc/modules/spi/security/spi-security.adoc" target="_blank"><i class="fa fa-hand-o-right fa-fw" aria-hidden="true"></i>&nbsp; Blame</a></li>
       </ul>
      </div> 
      <div id="preamble"> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>This module (<code>isis-module-security</code>) provides the ability to manage users, roles, and permissions. Users have roles, roles have permissions, and permissions are associated with application features. These features are derived from the Isis metamodel and can be scoped at either a <em>package</em>, <em>class</em> or individual <em>class member</em>. Permissions themselves can either <em>allow</em> or <em>veto</em> the ability to <em>view</em> or <em>change</em> any application feature.</p> 
        </div> 
        <div class="paragraph"> 
         <p>A key design objective of this module has been to limit the amount of permissioning data required. To support this objective:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>permissions are hierarchical: a class-level permission applies to all class members, while a package-level permission applies to all classes of all subpackages</p> </li> 
          <li> <p>permissions can <em>allow</em> or <em>veto</em> access; thus a role can be granted access to most features, but excluded from selective others</p> </li> 
          <li> <p>permissions are scoped: a member-level permission overrides a class-level permission, a class-level permission overrides a package-level permission; the lower-level package permission overrides a higher-level one (eg <code>com.mycompany.invoicing</code> overrides <code>com.mycompany</code>).</p> </li> 
          <li> <p>if there are conflicting permissions at the same scope, then the <em>allow</em> takes precedence over the <strong>veto</strong>.</p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>The module also supports multi-tenancy, whereby a user can be prevented from either viewing or modifying objects to which they don’t have access ("don’t belong to them").</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>In the original design of this module, this was based on the concept of a hierarchical tenancy, each of which is identified by an <em>application tenancy path</em> ("atPath") and the interpretation of which was hard-coded into the module. For example, users would typically have the ability to view/edit data in "their" tenancy or sub-tenancies, could view data in parent tenancies (for example, global reference data/standing data), and would have no access to any peer entities.</p> </li> 
          <li> <p>As of v1.13.3, this has been generalized; the interpretation of the "atPath" is entirely application-specific (with legacy support for the original design).</p> </li> 
          <li> <p>As of v1.13.6, this has been generalized further; an <code>ApplicationUser</code>'s "atPath" is no longer a reference to a particular <code>ApplicationTenancy</code> entity; it is simply a string. That string could of course still be used to represent the identifier of a single <code>ApplicationTenancy</code>, but it need not: it should be thought of instead as encoding all the characteristics of the user or domain object which pertain to determining visibility/editability. The <code>ApplicationTenancy</code> entity has been retained only to make it easier to migrate to this more generalized model.</p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>The module also provides an implementation of <a href="http://shiro.apache.org">Apache Shiro</a>'s <a href="https://shiro.apache.org/static/1.2.2/apidocs/org/apache/shiro/realm/AuthorizingRealm.html">AuthorizingRealm</a>. This allows the users/permissions to be used for Isis' authentication and/or authorization.</p> 
        </div> 
        <div class="paragraph"> 
         <p>Authentication is optional; each user is either <em>local</em> or <em>delegated</em>:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>users with a <em>delegated</em> account type are authenticated through a (configured) <em>delegated authentication realm</em> (for example LDAP). Any other implementation of Shiro’s <code>AuthenticatingRealm</code> can be used.</p> </li> 
          <li> <p>users with a <em>local</em> account type are authenticated through a <code>PasswordEncryptionService</code>.</p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>The module provides a default implementation based on <a href="http://www.mindrot.org/projects/jBCrypt/">jBCrypt</a>, but other implementations can be plugged-in if required.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_domain_model">Domain Model</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The following class diagram highlights the main concepts:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <img src="images/class-diagram.png" alt="class diagram" width="792" height="535"> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>(The colours used in the diagram are - approximately - from <a href="https://en.wikipedia.org/wiki/Object_Modeling_in_Color">Object Modeling in Color</a>)</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_screenshots">Screenshots</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module’s functionality can be explored by running the <a href="../../../quickstart/quickstart-with-example-usage.html">quickstart with example usage</a> using the <code>org.incode.domainapp.example.app.modules.ExampleDomSpiSecurityAppManifest</code>.</p> 
        </div> 
        <div class="paragraph"> 
         <p>A home page is displayed when the app is run:</p> 
        </div> 
        <div class="imageblock"> 
         <div class="content"> 
          <a class="image" href="images/000-home-page.png"><img src="images/000-home-page.png" alt="000 home page" width="600px"></a> 
         </div> 
        </div> 
        <div class="admonitionblock note"> 
         <table> 
          <tbody>
           <tr> 
            <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
            <td class="content"> 
             <div class="paragraph"> 
              <p>The remaining screenshots below <strong>do</strong> demonstrate the functionality of this module, but are out of date in that they are taken from the original isisaddons/incodehq module (prior to being amalgamated into the incode-platform).</p> 
             </div> </td> 
           </tr> 
          </tbody>
         </table> 
        </div> 
        <div class="sect2"> 
         <h3 id="_automatically_seeds_roles">Automatically Seeds Roles</h3> 
         <div class="paragraph"> 
          <p>When the security module starts up, it will automatically (idempotently) seed a number of roles, corresponding permissions and a default <code>isis-module-security-admin</code> user. This user has access to the security menu:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/010-menus.png"><img src="images/010-menus.png" alt="010 menus" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>One of the roles granted to the <code>isis-module-security-admin</code> user is the corresponding (similarly named) <code>isis-module-security-admin</code> role. It is this that grants all permissions to all classes in the security module itself:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/030-role.png"><img src="images/030-role.png" alt="030 role" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>isis-module-security-regular-user</code> role grants selected permissions to viewing/changing members of the <code>ApplicationUser</code> class (so that a user with this role can view/update their own record):</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/035-role-regular-user.png"><img src="images/035-role-regular-user.png" alt="035 role regular user" width="600px"></a> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_add_permission_at_different_scopes">Add permission at different scopes</h3> 
         <div class="paragraph"> 
          <p>Permissions can be created at different scopes or levels (highlighted in the above screenshot).</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>Permissions created at the <em>package level</em> apply to all classes in all packages and subpackages (that is, recursively).</p> </li> 
           <li> <p>Permissions defined at the <em>class level</em> take precedence to those defined at the package level.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>For example, a user might have <em>allow/viewing</em> at a parent level, but have this escalated to <em>allow/changing</em> for a particular class. Conversely, the class-level permission might veto access.</p> 
         </div> 
         <div class="paragraph"> 
          <p>Permissions can also be defined the <em>member level</em>: action, property or collection. These override permissions defined at either the class- or package-level.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_permissions_can_allow_or_veto_access">Permissions can ALLOW or VETO access</h3> 
         <div class="paragraph"> 
          <p>Permissions can either grant (allow) access or prevent (veto) access. If a user has permissions that contradict each other (for example, they are a member of "roleA" that allows the permission, but also of "roleB" that vetoes the permission) then by default the allow wins. However, this is strategy is pluggable, and the security module can be configured such that a veto would override an allow if required.</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/050-permission-rule.png"><img src="images/050-permission-rule.png" alt="050 permission rule" width="600px"></a> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_permissions_can_apply_to_viewing_or_changing_the_feature">Permissions can apply to VIEWING or CHANGING the feature</h3> 
         <div class="paragraph"> 
          <p>For a property, "changing" means being able to edit it. For a collection, "changing" means being able to add or remove from it. For an action, "changing" means being able to invoke it.</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/060-permission-mode.png"><img src="images/060-permission-mode.png" alt="060 permission mode" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Note that Isis' Wicket viewer currently does not support the concept of "changing" collections; the work-around is instead create a pair of actions to add/remove instead. This level of control is usually needed anyway.</p> 
         </div> 
         <div class="paragraph"> 
          <p>An <em>allow/changing</em> permission naturally enough implies <em>allow/viewing</em>, while conversely and symmetrically <em>veto/viewing</em> permission implies <em>veto/changing</em>.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_specify_package">Specify package</h3> 
         <div class="paragraph"> 
          <p>The list of packages (or classes, or class members) is derived from Isis' own metamodel.</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/070-permission-package-from-isis-metamodel.png"><img src="images/070-permission-package-from-isis-metamodel.png" alt="070 permission package from isis metamodel" width="600px"></a> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_application_users">Application users</h3> 
         <div class="paragraph"> 
          <p>Application users can have either a <em>local</em> or a <em>delegated</em> account type.</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>Local users are authenticated and authorized through the module’s Shiro realm implementation. The users are created explicitly by the administrator.</p> </li> 
           <li> <p>Optionally a delegate authentication realm can be configured; if so then delegated users can be created and their credentials will be authenticated by the delegate authentication realm. By default, users are created <em>automatically</em> when that user attempts to log in (though this feature can be disabled, see <a href="#shiro-configuration">below</a>). However, for safety their <code>ApplicationUser</code> accounts are created in a disabled state and with no roles, so the administrator is still required to update them.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>Once the user is created, then additional information about that user can be captured, including their name and contact details. This information is not otherwise used by the security module, but may be of use to other parts of the application. The users' roles and effective permissions are also shown.</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/080-permission-added.png"><img src="images/080-permission-added.png" alt="080 permission added" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>A user can maintain their own details, but may not alter other users' details. An administrator can alter all details, as well as reset a users' password.</p> 
         </div> 
         <div class="paragraph"> 
          <p>If a user is disabled, then they may not log in. This is useful for temporarily barring access to users without having to change all their roles, for example if they leave the company or go on maternity leave.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_user_sign_up_self_registration">User Sign-up (Self-Registration)</h3> 
         <div class="paragraph"> 
          <p>Apache Isis allows users to sign-up (self-register) with an application provided that:</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>the application is correctly configured for the <code>EmailNotificationService</code>, by specifying <code>isis.service.email.sender.address</code> and <code>isis.service.email.sender.password</code> configuration properties; and</p> </li> 
           <li> <p>the application provides an implementation of the <code>UserRegistrationService</code> (more on this below).</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>The sign-up link is shown on the initial login page:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/500-sign-in-register-link.png"><img src="images/500-sign-in-register-link.png" alt="500 sign in register link" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Following the link prompts for an email:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/510-sign-up.png"><img src="images/510-sign-up.png" alt="510 sign up" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>An email is sent to the specified address, with a link to complete the registration:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/530-sign-up-email.png"><img src="images/530-sign-up-email.png" alt="530 sign up email" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Completing registration consists of selecting a username and password:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/540-complete-registration.png"><img src="images/540-complete-registration.png" alt="540 complete registration" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The user can then login:</p> 
         </div> 
         <div class="imageblock"> 
          <div class="content"> 
           <a class="image" href="images/550-logged-in.png"><img src="images/550-logged-in.png" alt="550 logged in" width="600px"></a> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>In the screenshot above note that the user has a default set of permissions. These are set up by the <code>UserRegistrationService</code> implementation. The security module provides <code>SecurityModuleAppUserRegistrationServiceAbstract</code> which provides most of the implementation of this service; the demo app’s <code>AppUserRegistrationService</code> service completes the implementation by specifying the role(s) to assign any new users:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">AppUserRegistrationService</span> <span class="directive">extends</span> SecurityModuleAppUserRegistrationServiceAbstract {
    <span class="directive">protected</span> ApplicationRole getInitialRole() {
    <span class="keyword">return</span> findRole(ExampleFixtureScriptsRoleAndPermissions.ROLE_NAME);
    }
    <span class="directive">protected</span> <span class="predefined-type">Set</span>&lt;ApplicationRole&gt; getAdditionalInitialRoles() {
        <span class="keyword">return</span> <span class="predefined-type">Collections</span>.singleton(findRole(ExampleRegularRoleAndPermissions.ROLE_NAME));
    }
    <span class="directive">private</span> ApplicationRole findRole(<span class="directive">final</span> <span class="predefined-type">String</span> roleName) {
        <span class="keyword">return</span> applicationRoles.findRoleByName(roleName);
    }
    <span class="annotation">@Inject</span>
    <span class="directive">private</span> ApplicationRoles applicationRoles;
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>So, for the demo app at least, any new user has access to the "example-fixture-scripts" role (= the <em>Prototyping</em> menu) and to the "example-regular-role" (= the <em>Tenanted Entities</em> and the <em>Non-Tenanties Entities</em> menus).</p> 
         </div> 
         <div class="paragraph"> 
          <p>Speaking of which…​</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_application_tenancy">Application Tenancy</h3> 
         <div class="paragraph"> 
          <p>Application tenancy is the concept of determining which application users can see/modify domain objects. For this to work, there needs to be a application-specific mechanism for making the decision. This is defined by the (optional) <code>ApplicationTenancyEvaluator</code> SPI service:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">ApplicationTenancyEvaluator</span> {
    <span class="type">boolean</span> handles(<span class="predefined-type">Class</span>&lt;?&gt; cls);                                          <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">String</span> hides(<span class="predefined-type">Object</span> domainObject, ApplicationUser applicationUser);     <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="predefined-type">String</span> disables(<span class="predefined-type">Object</span> domainObject, ApplicationUser applicationUser);  <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>Whether this evaluator can determine the tenancy of the specified domain entity being interacted with (the "what").</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>Whether this instance of the domain object can be viewed by the user. Any non-null string is interpreted as meaning that the object should be hidden from view</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="3"></i><b>3</b></td> 
             <td>Whether this instance of the domain object can be modifed by the user; a non-null return value is interpreted as the reason it is read-only.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>This <a href="https://github.com/danhaywood/security-generalized-tenancy-app">demo app</a> demonstrates how this can work for an application where the name of each object is correlated to the roles of the user.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="sect3"> 
          <h4 id="_applicationtenancy_using_paths">ApplicationTenancy using Paths</h4> 
          <div class="paragraph"> 
           <p>The security module also provides its own built-in mechanism for determining application tenancy, through the concept of the application tenancy path ("atPath").</p> 
          </div> 
          <div class="admonitionblock note"> 
           <table> 
            <tbody>
             <tr> 
              <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
              <td class="content"> 
               <div class="paragraph"> 
                <p>This is designed for hierarchical tenancies, eg where a tenancy corresponds to a country or region and a user cannot reside in multiple regions concurrently. If this does not suit your requirements, then use the more general purpose <code>ApplicationTenancyEvaluator</code> SPI service described above.</p> 
               </div> </td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>Both application users and domain objects can have an "at path", this is expected to identify a single <code>ApplicationTenancy</code> entity. For application user’s this is simply a property of the object, for domain object’s this is performed by implementing the <code>HasAtPath</code> interface:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">HasAtPath</span> {
    <span class="predefined-type">String</span> getAtPath();
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The application can then be configured so that access to domain objects can be restricted based on the respective tenancies of the user accessing the object and of the object itself. The table below summarizes the rules:</p> 
          </div> 
          <table class="tableblock frame-all grid-all spread"> 
           <colgroup> 
            <col style="width: 33.3333%;"> 
            <col style="width: 33.3333%;"> 
            <col style="width: 16.6666%;"> 
            <col style="width: 16.6668%;"> 
           </colgroup> 
           <thead> 
            <tr> 
             <th class="tableblock halign-left valign-top">object’s tenancy</th> 
             <th class="tableblock halign-left valign-top">user’s tenancy</th> 
             <th class="tableblock halign-left valign-top">visible?</th> 
             <th class="tableblock halign-left valign-top">editable?</th> 
            </tr> 
           </thead> 
           <tbody> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>non-null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/igl</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/fr</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/igl</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/fr</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>Y</p> 
               </div>
              </div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/igl</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/fr</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
            <tr> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>/it/car</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div>
               <div class="paragraph"> 
                <p>null</p> 
               </div>
              </div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
             <td class="tableblock halign-left valign-top">
              <div></div></td> 
            </tr> 
           </tbody> 
          </table> 
          <div class="paragraph"> 
           <p>To enable this requires a single configuration property to be set, see below.</p> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="__code_applicationtenancypathevaluator_code"><code>ApplicationTenancyPathEvaluator</code></h4> 
          <div class="paragraph"> 
           <p>You may not wish to have your domain objects implement the <code>WithApplicationTenancy</code>. As all that is required is to determine the application "path" of a domain object, an alternative is to provide an implementation of the <code>ApplicationTenancyPathEvaluator</code> SPI service.</p> 
          </div> 
          <div class="paragraph"> 
           <p>This is defined as:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">ApplicationTenancyPathEvaluator</span> {
    <span class="type">boolean</span> handles(<span class="predefined-type">Class</span>&lt;?&gt; cls);                                  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">String</span> applicationTenancyPathFor(<span class="directive">final</span> <span class="predefined-type">Object</span> domainObject);    <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre> 
           </div> 
          </div> 
          <div class="colist arabic"> 
           <table> 
            <tbody>
             <tr> 
              <td><i class="conum" data-value="1"></i><b>1</b></td> 
              <td>indicates if the domain object’s class has multi-tenancy</td> 
             </tr> 
             <tr> 
              <td><i class="conum" data-value="2"></i><b>2</b></td> 
              <td>the method that actually returns the path.</td> 
             </tr> 
            </tbody>
           </table> 
          </div> 
          <div class="paragraph"> 
           <p>For example, the <a href="http://github.com/isisaddons/isis-app-todoapp">todoapp</a> provides an implementation for its <code>ToDoItem</code>:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DomainService</span>(
        nature = NatureOfService.DOMAIN
)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationTenancyPathEvaluatorForToDoApp</span> <span class="directive">implements</span> ApplicationTenancyPathEvaluator {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> handles(<span class="directive">final</span> <span class="predefined-type">Class</span>&lt;?&gt; cls) {
        <span class="keyword">return</span> ToDoItem.class == cls;
    }
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> applicationTenancyPathFor(<span class="directive">final</span> <span class="predefined-type">Object</span> domainObject) {
        <span class="comment">// always safe to do, per the handles(...) method earlier</span>
        <span class="directive">final</span> ToDoItem toDoItem = (ToDoItem) domainObject;
        <span class="keyword">return</span> toDoItem.getAtPath();
    }
}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>The evaluator can also optionally handle and return a path for the security domain module’s own <code>ApplicationUser</code> entity; but if it does not, then the user’s own tenancy (<code>ApplicationUser#getTenancy()</code>) is used instead.</p> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_how_to_configure_use">How to configure/use</h2> 
       <div class="sectionbody"> 
        <div class="sect2"> 
         <h3 id="_classpath">Classpath</h3> 
         <div class="paragraph"> 
          <p>Update your classpath by adding this dependency in your dom project’s <code>pom.xml</code>:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.isisaddons.module.security<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>isis-module-security-dom<span class="tag">&lt;/artifactId&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>If using the <code>PasswordEncryptionServiceUsingJBcrypt</code> service (discussed below), also add a dependency on the underlying <code>jbcrypt</code> library:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.mindrot<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>jbcrypt<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>0.3m<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Check for later releases by searching [Maven Central Repo](<a href="http://search.maven.org/#search|ga|1|isis-module-security-dom" class="bare">http://search.maven.org/#search|ga|1|isis-module-security-dom</a>).</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="__spi-security_shiro-configuration">Shiro configuration (shiro.ini)</h3> 
         <div class="paragraph"> 
          <p>The module includes <code>org.isisaddons.module.security.shiro.IsisModuleSecurityRealm</code>, an implementation of Apache Shiro’s <code>org.apache.shiro.realm.AuthorizingRealm</code> class. This realm is intended to be configured as the single realm for Shiro, but it can optionally have a delegateAuthenticationRealm injected into it.</p> 
         </div> 
         <div class="ulist"> 
          <ul> 
           <li> <p>if configured without a delegate realm then <code>IsisModuleSecurityRealm</code> deals only with <em>local</em> users and performs both authentication and authorization for them. Authentication is performed against encrypted password. Users with <em>delegate</em> account type will be unable to log in.</p> </li> 
           <li> <p>if configured with a delegate realm then <code>IsisModuleSecurityRealm</code> deals with both <em>delegated</em> and <em>local</em> users. Authentication of <em>delegated</em> users is performed by the delegate authentication realm, while <em>local</em> users continue to be authenticated in the same way as before, against their encrypted password. Authorization is performed the same way for either account type, by reference to their user roles and those roles' permissions.</p> </li> 
          </ul> 
         </div> 
         <div class="paragraph"> 
          <p>For both <em>local</em> and <em>delegated</em> users the realm will prevent a disabled user from logging in.</p> 
         </div> 
         <div class="paragraph"> 
          <p>To configure, update your <code>WEB-INF/shiro.ini’s `[main]</code> section:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="ini">[main]

isisModuleSecurityRealm=org.isisaddons.module.security.shiro.IsisModuleSecurityRealm

authenticationStrategy=org.isisaddons.module.security.shiro.AuthenticationStrategyForIsisModuleSecurityRealm
securityManager.authenticator.authenticationStrategy = $authenticationStrategy

securityManager.realms = $isisModuleSecurityRealm</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>If a delegate authentication realm is used, then define it and inject (again, in the <code>[main]</code> section):</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="ini">someOtherRealm=...                                                          <i class="conum" data-value="1"></i><b>(1)</b>

isisModuleSecurityRealm.delegateAuthenticationRealm=$someOtherRealm</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>the <code>someOtherRealm</code> variable defines some other realm to perform authentication.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>To disable the automatic creation of delegate users, use:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="ini">isisModuleSecurityRealm.autoCreateUser=false</code></pre> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_bootstrapping">Bootstrapping</h3> 
         <div class="paragraph"> 
          <p>If implementing <code>AppManifest</code> interface directly, then update its <code>getModules()</code> method and <code>getAdditionalServices()</code> method, eg:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Class</span>&lt;?&gt;&gt; getModules() {
    <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(
            ...
            org.isisaddons.module.security.SecurityModule.class,
    );
}
<span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">Class</span>&lt;?&gt;&gt; getAdditionalServices() {
    <span class="keyword">return</span> <span class="predefined-type">Arrays</span>.asList(
            org.isisaddons.module.security.dom.password.PasswordEncryptionServiceUsingJBcrypt.class         <i class="conum" data-value="1"></i><b>(1)</b>
           ,org.isisaddons.module.security.dom.permission.PermissionsEvaluationServiceAllowBeatsVeto.class  <i class="conum" data-value="2"></i><b>(2)</b>
    );
}</code></pre> 
          </div> 
         </div> 
         <div class="colist arabic"> 
          <table> 
           <tbody>
            <tr> 
             <td><i class="conum" data-value="1"></i><b>1</b></td> 
             <td>is an implementation of the <code>PasswordEncryptionService</code>. This is mandatory; local users (including the default <code>isis-module-security-admin</code> administrator user) must be authenticated using the password service. If required, any other implementation can be supplied.</td> 
            </tr> 
            <tr> 
             <td><i class="conum" data-value="2"></i><b>2</b></td> 
             <td>is an implementation of the <code>PermissionsEvaluationService</code> that determines how to resolve conflicting permissions at the same scope. This service is optional; if not presentthen the module will default to an allow-beats-veto strategy. An alternative implementation of <code>PermissionsEvaluationServiceVetoBeatsAllow</code> is also available for use if required; or any other implementation of this interface can be supplied.</td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
         <div class="paragraph"> 
          <p>Or, if using 1.15.x or later, you can subclass from <code>AppManifestAbstract</code> and use the <code>AppManifestAbstract.Builder</code>, by calling <code>withModules()</code> and <code>withAdditionalServices()</code>, eg:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">MyAppManifest</span> <span class="directive">extends</span> AppManifestAbstract {

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> Builder BUILDER = Builder.forModules(
            ...
            org.isisaddons.module.security.SecurityModule.class,
    )
    .withAdditionalServices(
            org.isisaddons.module.security.dom.password.PasswordEncryptionServiceUsingJBcrypt.class
           ,org.isisaddons.module.security.dom.permission.PermissionsEvaluationServiceAllowBeatsVeto.class
    )

    ...
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>There is further discussion of the <code>PasswordEncryptionService</code> and <code>PermissionsEvaluationService</code> below.</p> 
         </div> 
         <div class="admonitionblock note"> 
          <table> 
           <tbody>
            <tr> 
             <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> 
             <td class="content"> 
              <div class="paragraph"> 
               <p>The security module automatically seeds users and roles, using fixture scripts. As of <code>1.9.0</code> and later it is no longer necessary to register an implementation of <code>FixtureScripts</code> domain service; the core Apache Isis framework provides a default implementation.</p> 
              </div> </td> 
            </tr> 
           </tbody>
          </table> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_configuration_properties">Configuration Properties</h3> 
         <div class="sect3"> 
          <h4 id="_tenancy_checking">Tenancy Checking</h4> 
          <div class="paragraph"> 
           <p>To enable tenancy checking (as described above, to restrict a user’s access to tenanted objects), then a configuration property must be added. This can either be specified in the <code>AppManifest</code> or in <code>WEB-INF/isis.properties</code>.</p> 
          </div> 
          <div class="paragraph"> 
           <p>If using an <code>AppManifest</code>, then update its <code>getConfigurationProperties()</code> method:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">String</span>&gt; getConfigurationProperties() {
    <span class="keyword">return</span> ImmutableMap.of(
        <span class="string"><span class="delimiter">"</span><span class="content">isis.reflector.facets.include</span><span class="delimiter">"</span></span>,
        <span class="string"><span class="delimiter">"</span><span class="content">org.isisaddons.module.security.facets.TenantedAuthorizationFacetFactory</span><span class="delimiter">"</span></span>);

}</code></pre> 
           </div> 
          </div> 
          <div class="paragraph"> 
           <p>Alternatively, if using <code>isis.properties</code>, then define:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">isis.reflector.facets.include=org.isisaddons.module.security.facets.TenantedAuthorizationFacetFactory</code></pre> 
           </div> 
          </div> 
         </div> 
         <div class="sect3"> 
          <h4 id="_font_awesome_icons">Font awesome icons</h4> 
          <div class="paragraph"> 
           <p>The actions for the security module do <em>not</em> include font-awesome icons by default; you will most likely want to choose your own icons.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The easiest way to do this is using the <code>isis.reflector.facet.cssClassFa.patterns</code> configuration property which uses the name of the action methods to associate an appropriate font-awesome icon.</p> 
          </div> 
          <div class="paragraph"> 
           <p>The action names defined by the domain objects within the security module use the following naming conventions:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>newXxx</code> - create a new persisted object</p> </li> 
            <li> <p><code>findXxx</code> - find an existing object</p> </li> 
            <li> <p><code>updateXxx</code> - update an existing object</p> </li> 
            <li> <p><code>deleteXxx</code> - delete an existing object</p> </li> 
            <li> <p><code>addXxx</code> - add an existing object to a collection of another</p> </li> 
            <li> <p><code>removeXxx</code> - remove an object from a collection</p> </li> 
            <li> <p><code>allXxx</code> - for prototyping actions</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>There are also some other miscellaneous action names, eg:</p> 
          </div> 
          <div class="ulist"> 
           <ul> 
            <li> <p><code>lock</code> - lock a user (to prevent that user from logging in)</p> </li> 
            <li> <p><code>unlock</code> - unlock a user so that they can login</p> </li> 
            <li> <p><code>resetPassword</code> - allow an administrator to reset the password for a user</p> </li> 
            <li> <p><code>me</code> - to lookup the <code>ApplicationUser</code> entity for the currently logged-in user</p> </li> 
           </ul> 
          </div> 
          <div class="paragraph"> 
           <p>For example, define the following configuration property:</p> 
          </div> 
          <div class="listingblock"> 
           <div class="content"> 
            <pre class="CodeRay highlight"><code data-lang="ini">isis.reflector.facet.cssClassFa.patterns=\
                         new.*:fa-plus,\
                         add.*:fa-plus-square,\
                         create.*:fa-plus,\
                         update.*:fa-edit,\
                         remove.*:fa-minus-square,\
                         find.*:fa-search,\
                         all.*:fa-list</code></pre> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_overriding_the_schema">Overriding the schema</h3> 
         <div class="paragraph"> 
          <p>By default the module’s entities will be installed in the <code>isissecurity</code> schema. This is hard-coded in their annotations.</p> 
         </div> 
         <div class="paragraph"> 
          <p>This can be overridden by creating a <code>.orm</code> file. For example, to change the <code>ApplicationUser</code> table to reside in the "dbo" schema (to run on SQL Server, say), create an <code>ApplicationUser-sqlserver.orm</code> file. This should reside in the <code>org.isisaddons.module.security.dom.user</code> package:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="tag">&lt;orm</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://xmlns.jcp.org/xml/ns/jdo/orm</span><span class="delimiter">"</span></span>
     <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">"</span></span>
     <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://xmlns.jcp.org/xml/ns/jdo/orm</span> <span class="content">http://xmlns.jcp.org/xml/ns/jdo/orm_3_0.xsd</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;package</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">org.isisaddons.module.security.dom.user</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;class</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">"</span><span class="content">ApplicationUser</span><span class="delimiter">"</span></span>
               <span class="attribute-name">schema</span>=<span class="string"><span class="delimiter">"</span><span class="content">dbo</span><span class="delimiter">"</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;/class&gt;</span>
    <span class="tag">&lt;/package&gt;</span></code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>Then, in <code>persistor.properties</code>, add:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="properties">isis.persistor.datanucleus.impl.datanucleus.Mapping=sqlserver</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>This will cause DataNucleus to also search for <code>ApplicationUser-<strong>sqlserver</strong>.orm</code> files and use them if found.</p> 
         </div> 
         <div class="paragraph"> 
          <p>See <a href="../../../pages/domain-app.html#__domain-app_running-against-sql-server">here</a> for details on how to run the domain app (with example module) against SQL Server.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_api_and_implementation">API and Implementation</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>The module defines a number of services and default implementations. The behaviour of the module can be adjusted by implementing and registerng alternative implementations.</p> 
        </div> 
        <div class="sect2"> 
         <h3 id="_passwordencryptionservice">PasswordEncryptionService</h3> 
         <div class="paragraph"> 
          <p>The <code>PasswordEncryptionService</code> (responsible for authenticating <em>local</em> user accounts) is responsible for performing a one-way encryption of password to encrypted form. This encrypted version is then stored in the <code>ApplicationUser</code> entity’s <code>encryptedPassword</code> property.</p> 
         </div> 
         <div class="paragraph"> 
          <p>The service defines the following API:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">PasswordEncryptionService</span> {
    <span class="directive">public</span> <span class="predefined-type">String</span> encrypt(<span class="directive">final</span> <span class="predefined-type">String</span> password);
    <span class="directive">public</span> <span class="type">boolean</span> matches(<span class="directive">final</span> <span class="predefined-type">String</span> candidate, <span class="directive">final</span> <span class="predefined-type">String</span> encrypted);
}</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>The <code>PasswordEncryptionServiceUsingJbcrypt</code> provides an implementation of this service based on Blowfish algorithm. It depends in turn on <code>org.mindrot:jbcrypt</code> library; see above for details of updating the classpath to reference this library.</p> 
         </div> 
        </div> 
        <div class="sect2"> 
         <h3 id="_permissionsevaluationservice">PermissionsEvaluationService</h3> 
         <div class="paragraph"> 
          <p>The <code>PermissionsEvaluationService</code> is responsible for determining which of a number of possibly conflicting permissions apply to a target member. It defines the following API:</p> 
         </div> 
         <div class="listingblock"> 
          <div class="content"> 
           <pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">PermissionsEvaluationService</span> {
    <span class="directive">public</span> ApplicationPermissionValueSet.Evaluation evaluate(
                <span class="directive">final</span> ApplicationFeatureId targetMemberId,
                <span class="directive">final</span> ApplicationPermissionMode mode,
                <span class="directive">final</span> <span class="predefined-type">Collection</span>&lt;ApplicationPermissionValue&gt; permissionValues);</code></pre> 
          </div> 
         </div> 
         <div class="paragraph"> 
          <p>It is <em>not</em> necessary to register any implementation of this service in <code>isis.properties</code>; by default a strategy of allow-beats-veto is applied. However this strategy can be explicitly specified by registering the (provided) <code>PermissionsEvaluationServiceAllowBeatsVeto</code> implementation, or alternatively it can be reversed by registering <code>PermissionsEvaluationServiceVetoBeatsAllow</code>. Of course some other implementation with a different algorithm may instead be registered.</p> 
         </div> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_default_roles_permissions_and_users">Default Roles, Permissions and Users</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>Whenever the application starts the security module checks for (and creates if missing) the following roles, permissions and users:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><code>isis-module-security-admin</code> role</p> 
           <div class="ulist"> 
            <ul> 
             <li> <p><em>allow</em> <em>changing</em> of all classes (recursively) under the <code>org.isisaddons.module.security.app</code> package</p> </li> 
             <li> <p><em>allow</em> <em>changing</em> of all classes (recursively) under the <code>org.isisaddons.module.security.dom</code> package</p> </li> 
            </ul> 
           </div> </li> 
          <li> <p><code>isis-module-security-regular-user</code> role</p> 
           <div class="ulist"> 
            <ul> 
             <li> <p><em>allow</em> <em>changing</em> (ie invocation) of the <code>org.isisaddons.module.security.app.user.MeService#me</code> action</p> </li> 
             <li> <p><em>allow</em> <em>viewing</em> of the <code>org.isisaddons.module.security.app.dom.ApplicationUser</code> class</p> </li> 
             <li> <p><em>allow</em> <em>changing</em> of the selected "self-service" actions of the <code>org.isisaddons.module.security.app.dom.ApplicationUser</code> class</p> </li> 
            </ul> 
           </div> </li> 
          <li> <p><code>isis-module-security-fixture</code> role</p> 
           <div class="ulist"> 
            <ul> 
             <li> <p><em>allow</em> <em>changing</em> of <code>org.isisaddons.module.security.fixture</code> package (run example fixtures if prototyping)</p> </li> 
            </ul> 
           </div> </li> 
          <li> <p><code>isis-module-security-admin</code> user</p> 
           <div class="ulist"> 
            <ul> 
             <li> <p>granted <code>isis-module-security-admin</code> role</p> </li> 
            </ul> 
           </div> </li> 
          <li> <p><code>isis-applib-fixtureresults</code> role</p> 
           <div class="ulist"> 
            <ul> 
             <li> <p><em>allow</em> <em>changing</em> of <code>org.apache.isis.applib.fixturescripts.FixtureResult</code> class</p> </li> 
            </ul> 
           </div> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>This work is performed by the <code>SeedSecurityModuleService</code>.</p> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_known_issues">Known issues</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>There are no known issues at this time, however there are a few recognised limitations in the current implementation:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>It is not possible to set permissions on the root package. The workaround is to specify for <code>org</code> or <code>com</code> top-level package instead.</p> </li> 
          <li> <p>The concept of "app tenancy" might be pulled out into its own concept (since other modules also use it).</p> </li> 
         </ul> 
        </div> 
        <div class="paragraph"> 
         <p>We have the following ideas for future features:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p>enhance the auto-creation of delegated user accounts, so that an initial role can be assigned and the user left as enabled</p> </li> 
          <li> <p>users could possibly be extended to include user settings, refactored out from <a href="../../dom/settings/dom-settings.html">settings subdomain</a></p> </li> 
          <li> <p>hierarchical roles</p> </li> 
         </ul> 
        </div> 
       </div> 
      </div> 
      <div class="sect1"> 
       <h2 id="_dependencies">Dependencies</h2> 
       <div class="sectionbody"> 
        <div class="paragraph"> 
         <p>Maven can report modules dependencies using:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="bash">mvn dependency:list -o -pl modules/spi/security/impl -D excludeTransitive=true</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>which, excluding Apache Isis itself, returns these compile/runtime dependencies:</p> 
        </div> 
        <div class="listingblock"> 
         <div class="content"> 
          <pre class="CodeRay highlight"><code data-lang="bash">org.apache.shiro:shiro-core:jar:1.2.3
org.mindrot:jbcrypt:jar:0.3m</code></pre> 
         </div> 
        </div> 
        <div class="paragraph"> 
         <p>For further details on 3rd-party dependencies, see:</p> 
        </div> 
        <div class="ulist"> 
         <ul> 
          <li> <p><a href="https://shiro.apache.org/">Apache Shiro</a></p> </li> 
          <li> <p><a href="http://www.mindrot.org/projects/jBCrypt/">jBCrypt</a></p> 
           <div class="paragraph"> 
            <p>(Apache-like license); only required if the <code>PasswordEncryptionServiceUsingJBcrypt</code> service is configured.</p> 
           </div> </li> 
         </ul> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="hidden-xs hidden-sm hidden-md col-lg-3"> 
     <nav id="toc" data-spy="affix" data-toggle="toc"></nav> 
    </div> 
   </div> 
  </div> 
  <footer class="footer"> 
   <div class="container"> 
    <div class="row"> 
     <p class="text-center small text-muted"> Copyright © 2012~date Dan Haywood, licensed under the Apache&nbsp;License,&nbsp;v2.0. </p> 
    </div> 
   </div> 
  </footer> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> 
  <script src="../../../js/bootstrap/3.3.7/bootstrap.min.js"></script> 
  <script src="../../../js/bootstrap-toc/0.4.1/bootstrap-toc.min.js"></script> 
  <script src="../../../js/slick/1.5.0/slick.min.js"></script> 
  <script src="../../../js/elasticlunr/elasticlunr.min.js"></script> 
  <script src="../../../js/sticky-header/sticky-header.js"></script> 
  <script src="../../../js/search-panel/search-panel.js"></script> 
  <script src="../../../js/header-link/header-link.js"></script> 
  <script src="../../../js/toc-scroll/toc-scroll.js"></script>  
 </body>
</html>
